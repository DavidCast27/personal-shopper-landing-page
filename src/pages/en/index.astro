---
import SiteLayout from "../../layouts/SiteLayout.astro";
import HeroBlock from "@/components/blocks/hero-3.astro";
import ServicesBlock from "@/components/blocks/services-7.astro";
import HowItWorks from "@/components/blocks/how-it-works-1.astro";
import CTABlock from "@/components/blocks/cta-8.astro";
import { getHome, getHowItWorks, getServices } from "@/lib/content";

const placeholderImage = "/uploads/image-placeholder.daj0efyq_29eycw.webp";

const home = await getHome("en");
const steps = await getHowItWorks("en");
const services = await getServices("en");
// Home content is normalized in lib/content.ts
---

<SiteLayout
  lang="en"
  title={home.title}
  description={home.description}
>
  <HeroBlock
    image={{
      src: home.hero_image || placeholderImage,
      alt: home.hero_image_alt,
      width: 256,
      height: 256,
    }}
    links={[
      {
        text: home.hero_cta_text,
        href: home.hero_cta_href,
      },
      { text: "Learn more", href: "/en/services" },
    ]}
  >
    <h1>{home.hero_title}</h1>
    <p>
      {
        home.hero_subtitle
      }
    </p>
  </HeroBlock>
  <ServicesBlock
    items={services.map((service) => ({
      href: `/en/services#${service.slug}`,
      title: service.title,
      description: service.description,
      image: {
        src: service.image || placeholderImage,
        alt: service.title,
        width: 256,
        height: 256,
      },
      links: [{ text: "Learn more", href: `/en/services` }],
    }))}
  >
    <h2>Services</h2>
    <p>Explore our offering tailored to your needs.</p>
  </ServicesBlock>
  <HowItWorks
    title="Simple steps to get started"
    items={steps.map((s) => ({
      title: s.title,
      description: s.description,
      link_text: s.link_text,
      link_href: s.link_href,
    }))}
  />
  <CTABlock
    item={{
      rating: 5,
      description: "Trusted by happy clients",
      images: [
        { src: placeholderImage, alt: "" },
        { src: placeholderImage, alt: "" },
      ],
    }}
    links={[{ text: "Contact us", href: "/en/contact" }]}
  >
    <p>Ready to elevate your style?</p>
  </CTABlock>
</SiteLayout>
