---
import { Button } from "@/components/ui/button";
import {
  Section,
  SectionActions,
  SectionContent,
  SectionProse,
  SectionSplit,
  SectionSpread,
} from "@/components/ui/section";

interface Item {
  title?: string;
  description?: string;
  icon?: string;
  link_text?: string;
  link_href?: string;
}

interface Props {
  class?: string;
  id?: string;
  title?: string;
  subtitle?: string;
  items?: Item[];
  links?: { text?: string; href?: string }[];
}

const {
  class: className,
  id,
  title,
  subtitle,
  items = [],
  links,
} = Astro.props as Props;
---

<Section class={className} id={id}>
  <SectionSpread class="lg:items-end">
    <SectionContent>
      <SectionProse>
        {title && <h2>{title}</h2>}
        {subtitle && <p>{subtitle}</p>}
        <slot />
      </SectionProse>
      <SectionActions>
        {
          links?.map(({ text, ...link }, i) => (
            <Button variant={i === 0 ? "default" : "outline"} {...link}>
              {text}
            </Button>
          ))
        }
      </SectionActions>
    </SectionContent>
  </SectionSpread>
  <div class="relative">
    <div
      class="bg-border absolute left-0 right-0 top-6 h-px"
      aria-hidden="true"
    >
    </div>
    <ol
      class="relative flex items-stretch gap-6 overflow-x-auto pb-6 pr-2 snap-x snap-mandatory"
    >
      {
        items.map((it, idx) => (
          <li class="relative pt-10 min-w-2xs lg:min-w-0 lg:flex-1 lg:basis-0 snap-start flex">
            <div class="absolute left-1/2 top-0 -translate-x-1/2 size-10 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-semibold ring-4 ring-background shadow-xs">
              {idx + 1}
            </div>
            <div class="border-border bg-card text-card-foreground rounded-xl border p-5 text-center shadow-xs h-full flex flex-col">
              <h3 class="text-lg font-semibold leading-tight">{it.title}</h3>
              <p class="text-muted-foreground mt-2 text-sm">{it.description}</p>
              {it.link_text && it.link_href && (
                <div class="mt-auto pt-3">
                  <Button variant="outline" size="sm" href={it.link_href}>
                    {it.link_text}
                  </Button>
                </div>
              )}
            </div>
          </li>
        ))
      }
    </ol>
  </div>
</Section>
