---
import SiteLayout from '../../../layouts/SiteLayout.astro';
import ArticleBlock from '@/components/blocks/article-1.astro';
import { getBlogPosts, getPost } from '@/lib/content';
import { renderMarkdown } from '@/lib/markdown';

const placeholderImage = '/uploads/image-placeholder.daj0efyq_29eycw.webp';

export async function getStaticPaths() {
  const posts = await getBlogPosts('fr');
  return posts.map((p) => ({ params: { slug: p.slug } }));
}

const { slug } = Astro.params;
const post = await getPost('fr', slug!);
const title = post.title;
---

<SiteLayout lang="fr" title={`${title} â€“ Personal Shopper`} description={post.description || ''}>
  <ArticleBlock
    title={title}
    description={post.description || ''}
    image={{ src: post.image ?? placeholderImage, alt: title, width: 672, height: 378 }}
    item={{ title: 'Auteur', description: '', image: { src: placeholderImage, alt: '' } }}
  >
    <div class="prose prose-neutral max-w-none" set:html={renderMarkdown(post.body)} />
  </ArticleBlock>
</SiteLayout>
export const prerender = true;
