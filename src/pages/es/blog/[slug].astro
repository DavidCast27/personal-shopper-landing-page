---
import SiteLayout from '../../../layouts/SiteLayout.astro';
import ArticleBlock from '@/components/blocks/article-1.astro';
import placeholderImage from '@/assets/image-placeholder.Daj0eFyq_29eYCW.webp';
import { getBlogPosts, getPost } from '@/lib/content';
import { renderMarkdown } from '@/lib/markdown';

export async function getStaticPaths() {
  const posts = await getBlogPosts('es');
  return posts.map((p) => ({ params: { slug: p.slug } }));
}

const { slug } = Astro.params;
const post = await getPost('es', slug!);
const fm = post.frontmatter as { title?: string; description?: string; image?: string };
const title = fm.title ?? post.slug;
---

<SiteLayout lang="es" title={`${title} â€“ Personal Shopper`} description={fm.description ?? 'Entrada del blog'}>
  <ArticleBlock
    title={title}
    description={fm.description ?? ''}
    image={{ src: fm.image ?? placeholderImage, alt: title, width: 672, height: 378 }}
    item={{ title: 'Autor', description: '', image: { src: placeholderImage, alt: '' } }}
  >
    <div class="prose prose-neutral max-w-none" set:html={renderMarkdown(post.body)} />
  </ArticleBlock>
</SiteLayout>
